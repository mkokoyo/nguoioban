<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Người Ở Bản - Bản Hoàn Thiện 100%</title>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/vue/3.3.4/vue.global.prod.min.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-database-compat.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@900&family=Inter:wght@400;700&display=swap" rel="stylesheet">
    
    <style>
        :root { --primary: #ff4757; --bg: #ffffff; }
        [v-cloak] { display: none !important; }
        body { margin: 0; font-family: 'Inter', sans-serif; background: var(--bg); color: #1a1a1a; -webkit-font-smoothing: antialiased; }
        
        /* Header */
        header { padding: 25px 0; text-align: center; border-bottom: 5px solid var(--primary); background: #fff; position: sticky; top: 0; z-index: 1000; box-shadow: 0 4px 15px rgba(0,0,0,0.05); }
        .logo { font-family: 'Montserrat', sans-serif; font-weight: 900; font-size: 30px; letter-spacing: 4px; text-transform: uppercase; cursor: pointer; transition: 0.3s; }
        .logo span { color: var(--primary); }
        .logo:hover { opacity: 0.8; }
        
        .container { max-width: 1300px; margin: 0 auto; padding: 0 20px; }

        /* Main Player & Sidebar */
        .player-grid { display: grid; grid-template-columns: 2fr 1fr; gap: 30px; margin: 30px 0; }
        .video-wrapper { width: 100%; position: relative; padding-bottom: 56.25%; background: #000; border-radius: 20px; overflow: hidden; box-shadow: 0 15px 35px rgba(0,0,0,0.1); }
        .video-wrapper iframe { position: absolute; top: 0; left: 0; width: 100%; height: 100%; border: none; }

        .main-title { font-size: 26px; font-weight: 800; margin: 20px 0 10px; line-height: 1.4; color: #000; }
        .stats-bar { display: flex; align-items: center; gap: 20px; margin-bottom: 25px; color: #666; font-size: 14px; }
        .btn-vote { cursor: pointer; border: 1.5px solid #ddd; padding: 8px 22px; border-radius: 30px; background: #fff; font-weight: bold; transition: 0.3s; display: flex; align-items: center; gap: 8px; }
        .btn-vote:hover { border-color: var(--primary); color: var(--primary); }
        .btn-vote.active { background: var(--primary); color: #fff; border-color: var(--primary); }

        /* Sidebar: Có Thể Bạn Thích */
        .sidebar { background: #f9f9f9; padding: 25px; border-radius: 20px; border: 1px solid #eee; height: fit-content; }
        .side-head { font-weight: 900; color: var(--primary); font-size: 14px; text-transform: uppercase; margin-bottom: 20px; letter-spacing: 1px; border-bottom: 2px solid #eee; padding-bottom: 10px; }
        .side-item { display: flex; gap: 15px; margin-bottom: 18px; cursor: pointer; transition: 0.3s; border-radius: 12px; padding: 5px; }
        .side-item:hover { background: #fff; transform: translateX(8px); box-shadow: 0 5px 15px rgba(0,0,0,0.05); }
        .side-item img { width: 120px; border-radius: 8px; aspect-ratio: 16/9; object-fit: cover; flex-shrink: 0; }
        .side-title { font-size: 13.5px; font-weight: 700; line-height: 1.5; color: #222; display: -webkit-box; -webkit-line-clamp: 3; -webkit-box-orient: vertical; overflow: hidden; }

        /* Categories & Pagination */
        .cat-video-ngắn { --c: #ff4757; --b: #fff5f6; }
        .cat-cuộc-sống-thường-ngày { --c: #2ed573; --b: #f0fff4; }
        .cat-ẩm-thực-làng-quê { --c: #ffa502; --b: #fffaf0; }
        .cat-góc-khám-phá { --c: #1e90ff; --b: #f0f7ff; }

        .section-header { background: var(--b); border-left: 8px solid var(--c); padding: 18px 25px; margin: 55px 0 25px; display: flex; justify-content: space-between; align-items: center; border-radius: 0 15px 15px 0; }
        .section-title { font-weight: 900; text-transform: uppercase; color: var(--c); margin: 0; font-size: 20px; letter-spacing: 1px; }

        .grid { display: grid; grid-template-columns: repeat(var(--cols, 5), 1fr); gap: 25px; }
        .card { cursor: pointer; transition: 0.3s; }
        .card img { width: 100%; border-radius: 18px; transition: 0.4s ease; aspect-ratio: 16/9; object-fit: cover; border: 2px solid transparent; }
        .card:hover img { transform: translateY(-10px); border-color: var(--c); box-shadow: 0 15px 30px rgba(0,0,0,0.12); }
        .card h4 { margin: 15px 0 8px; font-size: 14px; font-weight: 700; line-height: 1.5; height: 42px; overflow: hidden; display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; color: #1a1a1a; transition: 0.3s; }
        .card:hover h4 { color: var(--c); }

        .page-controls { display: flex; gap: 10px; }
        .page-btn { width: 40px; height: 40px; border-radius: 50%; border: 2px solid var(--c); background: #fff; color: var(--c); cursor: pointer; font-weight: bold; transition: 0.3s; display: flex; align-items: center; justify-content: center; }
        .page-btn:hover:not(:disabled) { background: var(--c); color: #fff; }
        .page-btn:disabled { opacity: 0.2; cursor: not-allowed; }

        /* Footer */
        footer { background: #121212; color: #fff; padding: 60px 0; text-align: center; margin-top: 100px; position: relative; }
        footer::before { content: ""; position: absolute; top: 0; left: 0; width: 100%; height: 6px; background: linear-gradient(90deg, #ff4757, #2ed573, #ffa502, #1e90ff); }
        footer .logo span { color: var(--primary); }
        .footer-desc { color: #888; font-size: 13px; margin-top: 20px; letter-spacing: 2px; text-transform: uppercase; }

        @media (max-width: 1000px) { .player-grid { grid-template-columns: 1fr; } :root { --cols: 3; } }
        @media (max-width: 650px) { :root { --cols: 2; } }
    </style>
</head>
<body>

<div id="app" v-cloak>
    <header>
        <div class="logo" @click="adminPop">NGƯỜI Ở <span>BẢN</span></div>
    </header>

    <div class="container" v-if="vids.length > 0">
        <div v-if="adm" style="margin:20px 0; padding:25px; border:2px dashed var(--primary); border-radius:20px; background:#fff5f6; display: flex; gap: 15px; align-items: center;">
            <input v-model="newI" placeholder="Nhập ID YouTube" style="padding:12px; flex: 1; border-radius:10px; border:1px solid #ddd;">
            <select v-model="newC" style="padding:12px; border-radius:10px;">
                <option v-for="c in cats" :value="c">{{
